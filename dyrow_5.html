<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="res/lib/jquery/1.8.3/jquery.js" ></script>
<script type="text/javascript" src="res/common/dyRow.js" ></script>
<script>
$(function(){
    /**
     * 通过插件内部方法更新每行的序号
     */
    $("#tradeRecordsIndex").dyRow({
        onRowRemove: function(){
            $("#tradeRecordsIndex")._updateSortNum();
        },
        onRowClone: function(){
            $("#tradeRecordsIndex")._updateSortNum();
        },
        onRowAdd: function(){
            $("#tradeRecordsIndex")._updateSortNum();
        }
    });

    $("#json-row").click(function(){
        console.log( $("#tradeRecordsIndex").getTableObj() );
    });

})
</script>
</head>
<body>
<h2>把表格数据输出为json：</h2>
<div>
	<table id="tradeRecordsIndex" class="ui-record-table" width="60%">
		<colgroup>
            <col width="60">
			<col width="">
			<col width="">
			<col width="">
            <col width="">
			<col width="20">
			<col width="20">
		</colgroup>
		<thead>
			<tr>
                <th >序号</th>
				<th >IMEI串号</th>
				<th >品牌</th>
				<th >颜色</th>
                <th >销售对象</th>
                <th colspan="2">操作</th>
            </tr>
		</thead>
		<tbody >

		</tbody>
	</table>
</div>
<a id="add-row" href="#">添加一行</a>
<a id="json-row" href="#">table json</a>



<textarea id="add-template" style="display:none;">
<tr >
    <td class="rownum" property='sortnum'></td>
    <td>
        <input type="text" value="请输入imei号" property='imei'/>
    </td>
    <td>
        <select property='brand'>
            <option>请选择品牌</option>
            <option value="1">三星</option>
            <option value="2">苹果</option>
        </select>
    </td>
    <td>
        <input type="radio" name="color{0}" property='color' value="white"/>白
        <input type="radio" name="color{0}" property='color' value="black"/>黑
    </td>
    <td>
        <input type="checkbox" name="sale" property='sale' value="1"/>学生
        <input type="checkbox" name="sale" property='sale' value="2"/>白领
        <input type="checkbox" name="sale" property='sale' value="3"/>农民工
    </td>
    <td>
        <img class="row-cloner" src="img/clone.png" alt="Clone Row" />                        
    </td>
    <td>
        <img class="row-remover" src="img/remove.png" alt="Remove Row" />
    </td>
</tr>
</textarea>

</body>
</html>
